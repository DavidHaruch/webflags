function addCurrency(a){currencyElem=document.createElement("div"),currencyElem.textContent=a[i],currencyElem.className="card-content-currency",currencyElem.id="currencyLetters"+i,contentContainer=document.getElementById("nameDispCardContent"+i),contentContainer.appendChild(currencyElem)}function ajaxHandler(a){0===i&&ajaxcurrency()}function actOnCurrencyAjax(a){var b=(a.ISO_4217.CcyTbl.CcyNtry,a.ISO_4217.CcyTbl.CcyNtry);for(elemTextContentArr=[],i=0;i<currencyArr.length;i++){var c=document.getElementById("currencyLetters"+i);elemTextContentArr.push(c.textContent)}for(i=0;i<elemTextContentArr.length;i++)b[i].Ccy===elemTextContentArr[i]&&console.log("test")}function ajaxcurrency(){var a;a=new XMLHttpRequest,a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(200==a.status?(currencyresult=JSON.parse(a.responseText),actOnCurrencyAjax(currencyresult)):400==a.status?alert("There was an error 400"):alert("something else other than 200 was returned"))},a.open("GET","data/currency.json",!0),a.send()}function fabLoad(){setTimeout(function(){fabE.style.transform="scale(1) rotate(0deg)",fabE.style["-webkit-transform"]="scale(1) rotate(0deg)"},400)}function fab(){theBody=document.getElementById("body"),currentScroll=theBody.scrollTop,0!==theBody.scrollTop?(window.scrollBy(0,-currentScroll/5),timeout=setTimeout("fab()",10)):clearTimeout(timeout)}function imgMd5(a){function b(a){return encodeURIComponent(a)}for(need_replace=["Bouvet Island","Norway","Guadeloupe","France","Isle of Man","Isle of Mann","Timor-Leste","East Timor","Mayotte","Mayotte (local)","Saint Martin","France","South Georgia","South Georgia and the South Sandwich Islands","Saint Pierre and Miquelon","France","Svalbard and Jan Mayen","Norway","Heard Island and McDonald Islands","Australia","United States Minor Outlying Islands","United States","China","People's Republic of China","Åland","Åland","Micronesia","Federated States of Micronesia"],j=0;j<need_replace.length;j++)j%2===0&&a==need_replace[j]&&(a=need_replace[j+1]);for(needthe_include=["United","French Southern","Czech","Dominican","Marshall","Mariana","Central","Cook Islands","Cayman","Faroe Islands","Falkland","Indian","Solomon","Isle of Mann","Pitcairn","Vatican","British Virgin","China","Micronesia"],j=0;j<needthe_include.length;j++)a.includes(needthe_include[j])&&(a="the "+a);for(needthe_name=["Bahamas","Netherlands","Philippines","Turks and Caicos Islands","Republic of the Congo","Comoros"],j=0;j<needthe_name.length;j++)a==needthe_name[j]&&(a="the "+a);for(needThe_name=["Gambia"],j=0;j<needThe_name.length;j++)a==needThe_name[j]&&(a="The "+a);var c=" ",d=new RegExp(c,"g");a=a.replace(d,"_"),a.includes("China")&&(a=b(a)),svg=new Image,wikipediaPageUrl="http://wikipedia.org/wiki/Flag_of_"+a+"#/media/File:Flag_of_"+a+".svg",wikipediaBaseFileUrl="Flag_of_"+a+".svg",fileUrlMd5=md5(wikipediaBaseFileUrl),wikiMdSlash1=fileUrlMd5.charAt(0),wikiMdSlash2=fileUrlMd5.substring(0,2),finalFileName="http://upload.wikimedia.org/wikipedia/commons/"+wikiMdSlash1+"/"+wikiMdSlash2+"/Flag_of_"+a+".svg",svg.src=finalFileName,a.includes("Åland")&&(svg.src="http://upload.wikimedia.org/wikipedia/commons/5/52/Flag_of_%C3%85land.svg"),a.includes("Cocos")&&(svg.src="http://upload.wikimedia.org/wikipedia/commons/7/74/Flag_of_the_Cocos_%28Keeling%29_Islands.svg"),a.includes("Taiwan")&&(svg.src="http://upload.wikimedia.org/wikipedia/commons/7/72/Flag_of_the_Republic_of_China.svg"),a.includes("DR")&&(svg.src="http://upload.wikimedia.org/wikipedia/commons/6/6f/Flag_of_the_Democratic_Republic_of_the_Congo.svg"),a.includes("Ivory")&&(svg.src="https://upload.wikimedia.org/wikipedia/commons/f/fe/Flag_of_C%C3%B4te_d%27Ivoire.svg"),a.includes("Barthélemy")&&(svg.src="https://upload.wikimedia.org/wikipedia/commons/d/df/Flag_of_Saint_Barthelemy_%28local%29.svg"),a.includes("São")&&(svg.src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Flag_of_Sao_Tome_and_Principe.svg"),a.includes("Sahara")&&(svg.src="https://upload.wikimedia.org/wikipedia/commons/2/2c/Flag_of_Morocco.svg"),svg.className+="svgFlag",document.getElementById("nameDisp"+i).appendChild(svg),elemArr.push("nameDisp"+i)}function addCardContent(a){for(i=0;i<a.length;i++)capital=document.createElement("div"),capital.id="CountryCapital"+i,captial.className+="Country Capital",capital.textContent=a[i].capital,nameDispCardContent.appendChild(capital)}function actOnJSON(a){var b=a;for(capArr=[],currencyArr=[],i=0;i<b.length;i++)name=b[i].name.common,nameDisp=document.createElement("div"),nameDisp.id="nameDisp"+i,nameDisp.className+="card",nameDispCardContent=document.createElement("div"),nameDispCardContent.id="nameDispCardContent"+i,nameDispTitle=document.createElement("h2"),nameDispTitle.id="nameDispTitle"+i,nameDispTitle.className="card-content-title",nameDispTitle.textContent=name,document.getElementById("main").appendChild(nameDisp),imgMd5(name),nameDisp.appendChild(nameDispCardContent),nameDispCardContent.appendChild(nameDispTitle),capitalText=b[i].capital,capArr.push(capitalText),currencyArr.push(b[i].currency),lat=b[i].latlng[0],lng=b[i].latlng[1],capitalsFunc(capArr),addCurrency(currencyArr),ajaxHandler(currencyArr),latLng(lat,lng),googleMaps(lat,lng),wiki(name);return b}function latLng(a,b){latLngE=document.createElement("div"),latE=document.createElement("div"),latE.textContent=a+"°",latE.className+="card-content-lat",lngE=document.createElement("div"),lngE.textContent=b+"°",lngE.className+="card-content-lng",contentContainer=document.getElementById("nameDispCardContent"+i),contentContainer.appendChild(latE),contentContainer.appendChild(lngE),insertClearBoth(contentContainer)}function capitalsFunc(a){contentContainer=document.getElementById("nameDispCardContent"+i),capitalElem=document.createElement("h3"),capitalElem.textContent=a[i],capitalElem.className+="card-content-capital",clearFloat=document.createElement("div"),clearFloat.className="clearfloat",contentContainer.appendChild(capitalElem),contentContainer.appendChild(clearFloat)}function insertClearBoth(a){cb=document.createElement("div"),cb.className="clearfloat",a.appendChild(cb)}function googleMaps(a,b){mapsElem=document.createElement("a"),mapsUrl="https://www.google.com/maps/place/"+a+","+b+"/@"+a+","+b+",z12",mapsElem.setAttribute("href",mapsUrl),mapsElem.setAttribute("target","_blank"),mapsElem.setAttribute("data-ripple-color","red"),mapsElem.textContent="google maps",mapsElem.id="cardMap",mapsElem.className="card-content-maps button-flat",contentContainer=document.getElementById("nameDispCardContent"+i),contentContainer.appendChild(mapsElem)}function rmDots(){a=document.getElementById("spinnerText"),a&&(a.textContent="Loading")}function addDots(){setTimeout(function(){load=document.getElementById("spinnerText"),load&&(loadText=load.textContent,load.textContent+=" .",addDotsNum++,4>addDotsNum?addDots():(rmDots(),addDots(),addDotsNum=0))},700)}function SpinLoop(){setTimeout(function(){spinText=document.getElementById("spinnerText"),spin=document.getElementById("spinner"),spin.style.opacity=spinHideO/64,spinHideO--,spinHideO>spin.scrollHeight?SpinLoop():(removeElementNow(spin),removeElementNow(spinText))},10)}function presentOptions(a){console.log(a)}function scrollView(a,b){scrollelem=a,a||(scrollelem=document.getElementById(a)),topAmmt=scrollelem.getBoundingClientRect(),setTimeout(function(){window.scrollTo(0,topAmmt.top-10)},b)}function searchGetFocus(){searchDecorative.className="search-bar search-bar_focus rippled",inputTag.value="",inputTag.style.color="#111"}function searchLoseFocus(){searchDecorative.className="search-bar rippled",inputTag.value="Search",inputTag.style.color="#aaa",searchIcon.style.display="inline-block",searchIconAlt.style.display="none"}function tooltip(){for(i=0;i<tooltipped.length;i++){var a=document.createElement("div"),b=tooltipped[i];a.id="tooltip"+i,a.className+="tooltip",a.textContent=tooltipped[i].getAttribute("data-tooltip"),tooltipped[i].offsetWidth>128&&(a.style.maxWidth=tooltipped[i].offsetWidth-32+"px"),b.parentNode.appendChild(a),addT(a,b),rmT(a,b)}}function addT(a,b){b.addEventListener("mouseenter",function(){a.style.display="block",setTimeout(function(){a.style.transform="translateY(0)"},500),setTimeout(function(){a.style.opacity=.5},400),setTimeout(function(){a.style.opacity=1},400)},!1)}function rmT(a){parent.addEventListener("mouseout",function(){a.style.transform="translateY(0.5rem)",a.style.display="none",a.style.opacity=0},!1)}function wiki(a){nametext=a,find=" ",takeoutspacesregex=new RegExp(find,"g"),a=a.replace(takeoutspacesregex,"_"),url="http://wikipedia.org/wiki/"+a,wikiElem=document.createElement("a"),wikiElem.setAttribute("href",url),mapsElem.setAttribute("data-ripple-color","red"),wikiElem.className="button-flat",wikiElem.textContent="wikipedia",contentContainer=document.getElementById("nameDispCardContent"+i),contentContainer.appendChild(wikiElem),insertClearBoth(contentContainer)}var fabE=document.getElementById("fab");fabE.onload=fabLoad();var timeout,elemArr=[],removeElementNow=function(a){document.getElementById(""+a)===!0?(cwi=document.getElementById("elemID"),cwi.parentNode.removeChild(cwe)):void 0!==typeof a?a.parentNode.removeChild(a):document.querySelectorAll("."+a)===!0?(cwc=document.querySelectorAll("."+a),cwi.parentNode.removeChild(cwc)):console.log("unknown format")},addDotsNum=0,spinHideO=64,result,finished=!1,AJAXcountries=function(){var a;a=new XMLHttpRequest,a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE?200==a.status?(result=JSON.parse(a.responseText),actOnJSON(result),SpinLoop()):400==a.status?alert("There was an error 400"):alert("something else other than 200 was returned"):1==a.readyState&&addDots()},a.open("GET","data/countries.min.json",!0),a.send()};AJAXcountries();var inputTag=document.getElementById("search"),searchButton=document.getElementById("searchButton"),recentSearches=[];inputTag.addEventListener("keydown",function(a){key=a.charCode||a.which,13===key&&(search(inputTag.value),recentSearches.push(inputTag.value))}),inputTag.addEventListener("keyup",function(a){if(""===inputTag.value){for(;searchOptions.firstChild;)searchOptions.removeChild(searchOptions.firstChild);return!1}key=a.charCode||a.which,13===key?console.log("enter pressed"):8==key||46===key?(searchDisplay("%"),searchDisplay(inputTag.value)):16!==key&&(searchDisplay("%"),searchDisplay(inputTag.value))});var searchDisplay=function(a){if(searchOptions=document.getElementById("searchOptions"),suggestions=searchOptions.childNodes,console.log(suggestions)," "===a)return!1;if("%"===a){for(;searchOptions.firstChild;)searchOptions.removeChild(searchOptions.firstChild);return!1}var b=[];for(console.log(a),i=0;i<elemArr.length;i++)elem=document.getElementById(elemArr[i]),titleid="nameDispTitle"+i,elemTitle=document.getElementById(titleid),elemName=elemTitle.textContent,elemName.includes(a)&&b.push(elemName);for(console.log(b),i=0;i<b.length;i++)possElem=document.createElement("div"),possElem.textContent=b[i],searchOptions.appendChild(possElem)},search=function(a){var b=[];if(""===a)return!1;for(j=0;j<elemArr.length;j++)elem=document.getElementById(elemArr[j]),elemText=elem.textContent,elemText.includes(a)?(b.push(elemText),console.log(b),1===b.length&&(console.log(b.length),scrollView(elem,300))):elemText.includes(a)?a===elem.textContent&&(console.log(b),scrollView(elem,300)):console.log("/");b.length>1&&(console.log(b),console.log("more than 1"),presentOptions())},searchDecorative=document.getElementById("searchDecorative"),searchIcon=document.getElementById("searchIcon"),searchIconAlt=document.getElementById("searchIconAlt");inputTag.value="Search",inputTag.addEventListener("focus",function(){searchGetFocus()}),inputTag.addEventListener("blur",function(){searchLoseFocus()});var tooltipped=document.querySelectorAll(".tooltipped");for(i=0;i<tooltipped.length;i++);tooltip();